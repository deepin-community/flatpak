<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>org.freedesktop.portal.Flatpak: Flatpak Library Reference Manual</title>
<meta name="generator" content="DocBook XSL Stylesheets Vsnapshot">
<link rel="home" href="index.html" title="Flatpak Library Reference Manual">
<link rel="up" href="ch02.html" title="D-Bus APIs">
<link rel="prev" href="gdbus-org.freedesktop.portal.Documents.html" title="org.freedesktop.portal.Documents">
<link rel="next" href="gdbus-org.freedesktop.portal.Flatpak.UpdateMonitor.html" title="org.freedesktop.portal.Flatpak.UpdateMonitor">
<meta name="generator" content="GTK-Doc V1.34.0 (XML mode)">
<link rel="stylesheet" href="style.css" type="text/css">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table class="navigation" id="top" width="100%" summary="Navigation header" cellpadding="2" cellspacing="5"><tr valign="middle">
<td width="100%" align="left" class="shortcuts">
<a href="#" class="shortcut">Top</a><span id="nav_description">  <span class="dim">|</span> 
                  <a href="#gdbus-org.freedesktop.portal.Flatpak.description" class="shortcut">Description</a></span><span id="nav_properties">  <span class="dim">|</span> 
                  <a href="#gdbus-org.freedesktop.portal.Flatpak.properties" class="shortcut">Properties</a></span><span id="nav_signals">  <span class="dim">|</span> 
                  <a href="#gdbus-org.freedesktop.portal.Flatpak.signals" class="shortcut">Signals</a></span>
</td>
<td><a accesskey="h" href="index.html"><img src="home.png" width="16" height="16" border="0" alt="Home"></a></td>
<td><a accesskey="u" href="ch02.html"><img src="up.png" width="16" height="16" border="0" alt="Up"></a></td>
<td><a accesskey="p" href="gdbus-org.freedesktop.portal.Documents.html"><img src="left.png" width="16" height="16" border="0" alt="Prev"></a></td>
<td><a accesskey="n" href="gdbus-org.freedesktop.portal.Flatpak.UpdateMonitor.html"><img src="right.png" width="16" height="16" border="0" alt="Next"></a></td>
</tr></table>
<div class="refentry">
<a name="gdbus-org.freedesktop.portal.Flatpak"></a><div class="titlepage"></div>
<div class="refnamediv"><table width="100%"><tr>
<td valign="top">
<h2><span class="refentrytitle"><a name="gdbus-interface-org-freedesktop-portal-Flatpak.top_of_page"></a>org.freedesktop.portal.Flatpak</span></h2>
<p>org.freedesktop.portal.Flatpak — Flatpak portal</p>
</td>
<td class="gallery_image" valign="top" align="right"></td>
</tr></table></div>
<div class="refsynopsisdiv">
<h2>Methods</h2>
<pre class="synopsis">
<a class="link" href="gdbus-org.freedesktop.portal.Flatpak.html#gdbus-method-org-freedesktop-portal-Flatpak.Spawn" title="The Spawn() method">Spawn</a>               (IN  ay    cwd_path,
                     IN  aay   argv,
                     IN  a{uh} fds,
                     IN  a{ss} envs,
                     IN  u     flags,
                     IN  a{sv} options,
                     OUT u     pid);
<a class="link" href="gdbus-org.freedesktop.portal.Flatpak.html#gdbus-method-org-freedesktop-portal-Flatpak.SpawnSignal" title="The SpawnSignal() method">SpawnSignal</a>         (IN  u     pid,
                     IN  u     signal,
                     IN  b     to_process_group);
<a class="link" href="gdbus-org.freedesktop.portal.Flatpak.html#gdbus-method-org-freedesktop-portal-Flatpak.CreateUpdateMonitor" title="The CreateUpdateMonitor() method">CreateUpdateMonitor</a> (IN  a{sv} options,
                     OUT o     handle);
</pre>
</div>
<div class="refsect1">
<a name="id-1.3.9.4"></a><h2>Signals</h2>
<pre class="synopsis">
<a class="link" href="gdbus-org.freedesktop.portal.Flatpak.html#gdbus-signal-org-freedesktop-portal-Flatpak.SpawnStarted" title='The "SpawnStarted" signal'>SpawnStarted</a> (u pid,
              u relpid);
<a class="link" href="gdbus-org.freedesktop.portal.Flatpak.html#gdbus-signal-org-freedesktop-portal-Flatpak.SpawnExited" title='The "SpawnExited" signal'>SpawnExited</a>  (u pid,
              u exit_status);
</pre>
</div>
<div class="refsect1">
<a name="id-1.3.9.5"></a><h2>Properties</h2>
<pre class="synopsis">
<a class="link" href="gdbus-org.freedesktop.portal.Flatpak.html#gdbus-property-org-freedesktop-portal-Flatpak.version" title='The "version" property'>version</a>   readable   u
<a class="link" href="gdbus-org.freedesktop.portal.Flatpak.html#gdbus-property-org-freedesktop-portal-Flatpak.supports" title='The "supports" property'>supports</a>  readable   u
</pre>
</div>
<div class="refsect1">
<a name="gdbus-interface-org-freedesktop-portal-Flatpak"></a><h2>Description</h2>
<p>
The flatpak portal exposes some interactions with flatpak on the
host to the sandbox. For example, it allows you to restart the
applications or start a more sandboxed instance.
</p>
<p>
This portal is available on the D-Bus session bus under the
bus name org.freedesktop.portal.Flatpak and the object path
/org/freedesktop/portal/Flatpak.
</p>
<p>
This documentation describes version 6 of this interface.
</p>
</div>
<div class="refsect1">
<a name="gdbus-methods-org.freedesktop.portal.Flatpak"></a><h2>Method Details</h2>
<div class="refsect2">
<a name="gdbus-method-org-freedesktop-portal-Flatpak.Spawn"></a><h3>The Spawn() method</h3>
<pre class="programlisting">
Spawn (IN  ay    cwd_path,
       IN  aay   argv,
       IN  a{uh} fds,
       IN  a{ss} envs,
       IN  u     flags,
       IN  a{sv} options,
       OUT u     pid);
</pre>
<p>
</p>
<p>
</p>
<div class="variablelist"><table border="0" class="variablelist">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody>
<tr>
<td><p><span class="term"><code class="literal">IN ay <em class="parameter"><code>cwd_path</code></em></code>:</span></p></td>
<td>
<p>
</p>
<p>
</p>
</td>
</tr>
<tr>
<td><p><span class="term"><code class="literal">IN aay <em class="parameter"><code>argv</code></em></code>:</span></p></td>
<td>
<p>
</p>
<p>
</p>
</td>
</tr>
<tr>
<td><p><span class="term"><code class="literal">IN a{uh} <em class="parameter"><code>fds</code></em></code>:</span></p></td>
<td>
<p>
</p>
<p>
</p>
</td>
</tr>
<tr>
<td><p><span class="term"><code class="literal">IN a{ss} <em class="parameter"><code>envs</code></em></code>:</span></p></td>
<td>
<p>
</p>
<p>
</p>
</td>
</tr>
<tr>
<td><p><span class="term"><code class="literal">IN u <em class="parameter"><code>flags</code></em></code>:</span></p></td>
<td>
<p>
</p>
<p>
</p>
</td>
</tr>
<tr>
<td><p><span class="term"><code class="literal">IN a{sv} <em class="parameter"><code>options</code></em></code>:</span></p></td>
<td>
<p>
</p>
<p>
</p>
</td>
</tr>
<tr>
<td><p><span class="term"><code class="literal">OUT u <em class="parameter"><code>pid</code></em></code>:</span></p></td>
<td>
<p>
</p>
<p>
</p>
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="gdbus-method-org-freedesktop-portal-Flatpak.SpawnSignal"></a><h3>The SpawnSignal() method</h3>
<pre class="programlisting">
SpawnSignal (IN  u pid,
             IN  u signal,
             IN  b to_process_group);
</pre>
<p>
This method lets you send a Unix signal to a process
that was started with <a class="link" href="gdbus-org.freedesktop.portal.Flatpak.html#gdbus-method-org-freedesktop-portal-Flatpak.Spawn" title="The Spawn() method">Spawn()</a>.
The <em class="parameter"><code>pid</code></em> argument here should be the PID that is returned
by the Spawn() call: it is not necessarily valid in the caller's
PID namespace.
</p>
<div class="variablelist"><table border="0" class="variablelist">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody>
<tr>
<td><p><span class="term"><code class="literal">IN u <em class="parameter"><code>pid</code></em></code>:</span></p></td>
<td><p>
the PID inside the container to signal
</p></td>
</tr>
<tr>
<td><p><span class="term"><code class="literal">IN u <em class="parameter"><code>signal</code></em></code>:</span></p></td>
<td><p>
the signal to send (see <span class="citerefentry"><span class="refentrytitle">signal</span>(7)</span>)
</p></td>
</tr>
<tr>
<td><p><span class="term"><code class="literal">IN b <em class="parameter"><code>to_process_group</code></em></code>:</span></p></td>
<td><p>
whether to send the signal to the process group
</p></td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="gdbus-method-org-freedesktop-portal-Flatpak.CreateUpdateMonitor"></a><h3>The CreateUpdateMonitor() method</h3>
<pre class="programlisting">
CreateUpdateMonitor (IN  a{sv} options,
                     OUT o     handle);
</pre>
<p>
Creates an update monitor object that will emit
signals when an update for the caller becomes
available, and can be used to install it.
</p>
<p>
The handle will be of the form /org/freedesktop/portal/Flatpak/update_monitor/SENDER/TOKEN,
where SENDER is the caller's unique name, with the initial ':' removed and
all '.' replaced by '_', and TOKEN is a unique token that the caller can optionally provide
with the 'handle_token' key in the options vardict.
</p>
<p>
Currently, no other options are accepted.
</p>
<p>
This was added in version 2 of this interface (available from flatpak 1.5.0 and later).
</p>
<div class="variablelist"><table border="0" class="variablelist">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody>
<tr>
<td><p><span class="term"><code class="literal">IN a{sv} <em class="parameter"><code>options</code></em></code>:</span></p></td>
<td><p>
Vardict with optional further information
</p></td>
</tr>
<tr>
<td><p><span class="term"><code class="literal">OUT o <em class="parameter"><code>handle</code></em></code>:</span></p></td>
<td><p>
Object path for the <a class="link" href="gdbus-org.freedesktop.portal.Flatpak.UpdateMonitor.html#gdbus-interface-org-freedesktop-portal-Flatpak-UpdateMonitor.top_of_page">org.freedesktop.portal.Flatpak.UpdateMonitor</a> object
</p></td>
</tr>
</tbody>
</table></div>
</div>
</div>
<div class="refsect1">
<a name="gdbus-signals-org.freedesktop.portal.Flatpak"></a><h2>Signal Details</h2>
<div class="refsect2">
<a name="gdbus-signal-org-freedesktop-portal-Flatpak.SpawnStarted"></a><h3>The "SpawnStarted" signal</h3>
<pre class="programlisting">
SpawnStarted (u pid,
              u relpid);
</pre>
<p>
</p>
<p>
This is only non-zero if the expose PIDs flag (32) or the share
PIDs flag (128) was passed to
<a class="link" href="gdbus-org.freedesktop.portal.Flatpak.html#gdbus-method-org-freedesktop-portal-Flatpak.Spawn" title="The Spawn() method">Spawn()</a>, and it may still be zero if
the process exits before its relative PID could be read.
</p>
<p>
Emitted when a process started by <a class="link" href="gdbus-org.freedesktop.portal.Flatpak.html#gdbus-method-org-freedesktop-portal-Flatpak.Spawn" title="The Spawn() method">Spawn()</a>
has fully started. In other words, <a class="link" href="gdbus-org.freedesktop.portal.Flatpak.html#gdbus-method-org-freedesktop-portal-Flatpak.Spawn" title="The Spawn() method">Spawn()</a> returns once the sandbox
has been started, and this signal is emitted once the process inside
itself is started.
</p>
<p>
Only emitted by version 4 of this interface (available from flatpak
1.8.0 and later) and if the notify start flag (64) was passed to
<a class="link" href="gdbus-org.freedesktop.portal.Flatpak.html#gdbus-method-org-freedesktop-portal-Flatpak.Spawn" title="The Spawn() method">Spawn()</a>.
</p>
<div class="variablelist"><table border="0" class="variablelist">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody>
<tr>
<td><p><span class="term"><code class="literal">u <em class="parameter"><code>pid</code></em></code>:</span></p></td>
<td><p>
the PID of the process that has been started
</p></td>
</tr>
<tr>
<td><p><span class="term"><code class="literal">u <em class="parameter"><code>relpid</code></em></code>:</span></p></td>
<td><p>
the PID of the process relative to the current namespace.
</p></td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="gdbus-signal-org-freedesktop-portal-Flatpak.SpawnExited"></a><h3>The "SpawnExited" signal</h3>
<pre class="programlisting">
SpawnExited (u pid,
             u exit_status);
</pre>
<p>
Emitted when a process started by <a class="link" href="gdbus-org.freedesktop.portal.Flatpak.html#gdbus-method-org-freedesktop-portal-Flatpak.Spawn" title="The Spawn() method">Spawn()</a>
exits.
Use g_spawn_check_exit_status(), or the macros such as
WIFEXITED documented in
<span class="citerefentry"><span class="refentrytitle">waitpid</span>(2)</span>,
to interpret the <em class="parameter"><code>exit_status</code></em>.
</p>
<p>
This signal is not emitted for processes that were not launched
directly by Spawn(), for example if a process launched by
Spawn() runs foreground or background child processes.
</p>
<div class="variablelist"><table border="0" class="variablelist">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody>
<tr>
<td><p><span class="term"><code class="literal">u <em class="parameter"><code>pid</code></em></code>:</span></p></td>
<td><p>
the PID of the process that has ended
</p></td>
</tr>
<tr>
<td><p><span class="term"><code class="literal">u <em class="parameter"><code>exit_status</code></em></code>:</span></p></td>
<td><p>
the wait status (see <span class="citerefentry"><span class="refentrytitle">waitpid</span>(2)</span>)
</p></td>
</tr>
</tbody>
</table></div>
</div>
</div>
<div class="refsect1">
<a name="gdbus-properties-org.freedesktop.portal.Flatpak"></a><h2>Property Details</h2>
<div class="refsect2">
<a name="gdbus-property-org-freedesktop-portal-Flatpak.version"></a><h3>The "version" property</h3>
<pre class="programlisting">
version  readable   u
</pre>
<p>
</p>
<p>
</p>
</div>
<hr>
<div class="refsect2">
<a name="gdbus-property-org-freedesktop-portal-Flatpak.supports"></a><h3>The "supports" property</h3>
<pre class="programlisting">
supports  readable   u
</pre>
<p>
Flags marking what optional features are available.
 The following flags values are supported:
 </p>
<div class="variablelist"><table border="0" class="variablelist">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody><tr>
<td><p><span class="term">1 (FLATPAK_SPAWN_SUPPORT_FLAGS_EXPOSE_PIDS)</span></p></td>
<td><p>
      Supports the expose sandbox pids flag of Spawn.
      If the version of this interface is 5 or later, this also
      indicates that the share sandbox pids flag is available.
     </p></td>
</tr></tbody>
</table></div>
<p>
</p>
<p>
 This was added in version 3 of this interface (available from flatpak 1.6.0 and later).
</p>
</div>
</div>
</div>
<div class="footer">
<hr>Generated by GTK-Doc V1.34.0</div>
</body>
</html>